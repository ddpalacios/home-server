<!DOCTYPE html>
<html>
	<head></head>
	<style>
table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 8px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}	
	
	
	</style>
	<body>
		<h1>Studio</h1>
		<button onclick="start_websocket();" style="background-color: #3BEB28;">start</button>
		<button onclick="stop_websocket()" style="background-color: #EB521F;">stop</button>
		<button onclick="location.href = '/life-of-sounds/home';" >home</button>
		<br>
		<br>
		<label for="name">Enter Test Message:</label>
		<input id=myText type='text' ></input>
		<button onclick="send_message();">send</button>
		<button onclick="open_microphone();" >Start Microphone</button>
		<button onclick="close_microphone();" >Close Microphone</button>
		<br>
		<div>
			<audio id="audio_stream_id" style="margin-top: 2%; width: 30%; " controls=""></audio>
		</div>
		<div id="audio_table_container"></div>
	</body>

	<script>
		/*
		var user = null;
		 function main(){
				 var request = new Request('/life-of-sounds/session/user', {
							 method: "GET",
							 headers: new Headers({
										 'Accept': 'application/json'
									 
								})
				
						 });
				fetch(request)
					.then((response)=> response.json())
					.then((data)=> {
							user = data;
							console.log(user);
							})
				
		}

	       */



	function start_websocket(){
		ws = new WebSocket('wss://' + window.location.host  +'/life-of-sounds/home/studio/websocket');
		console.log(ws);
		ws.onopen = () => {
			alert("Websocket connection established");
		}
		ws.onmessage = (event) => {
				console.log("Message from server:", event.data);
		}
		ws.onerror = (error) => {
			console.error("Websocket error:", error);

		}
		ws.onclose = () => {
			console.log("Websocket connection closed");

		}			
			
	}
	
	</script>

</html>
